<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>实名认证 - 极速贷款</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* 原有样式保持不变... */

    /* 新增：识别信息展示区域 */
    .info-display {
      background: #f8f8f8;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      display: none; /* 初始隐藏 */
    }

    .info-title {
      font-size: 16px;
      font-weight: bold;
      color: #333;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }

    .info-title i {
      color: #4CAF50;
      margin-right: 8px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .info-item {
      font-size: 14px;
    }
    .realname-card {
      /* ...其他样式 */
      padding-bottom: 80px; /* 大约等于导航栏高度，可根据实际情况调整 */
    }

    .info-label {
      color: #666;
      margin-bottom: 3px;
    }

    .info-value {
      color: #333;
      font-weight: bold;
    }

    /* 状态提示 */
    .status-tip {
      text-align: center;
      color: #666;
      font-size: 14px;
      margin: 10px 0;
      display: none;
    }

    .status-tip.success {
      color: #4CAF50;
    }

    .status-tip.waiting {
      color: #FF9800;
    }

    .btn {
  /* ... 其他现有样式 ... */
      display: block;
      margin-left: auto;
      margin-right: auto;
      background-color: white;     /* 白色填充 */
      border: 1px solid #135188;   /* 蓝色边框 */
      font-color: #0f4c81;              /* 蓝色字体 */
    }


  </style>
</head>
<body>
<div class="welcome-header">
  <div class="welcome-text">12:00 实名认证</div>
</div>

<div class="realname-card">
  <div class="tip">
    正在申请互联网小额贷款，应监管要求，需要进行本人身份验证
  </div>

  <!-- 上传身份证区域 -->
  <div class="upload-area">
    <div class="upload-item">
      <label class="upload-label">上传人像面</label>
      <div class="upload-container">
        <input type="file" class="file-input portrait-input" accept="image/*" id="portrait-side">
        <i class="fas fa-id-card upload-icon"></i>
        <div class="upload-text">点击上传身份证人像面</div>
      </div>
      <div class="upload-note">保证照片清晰，边框完整，方便快速识别</div>
    </div>

    <div class="upload-item">
      <label class="upload-label">上传国徽面</label>
      <div class="upload-container">
        <input type="file" class="file-input emblem-input" accept="image/*" id="national-emblem">
        <i class="fas fa-id-card upload-icon"></i>
        <div class="upload-text">点击上传身份证国徽面</div>
      </div>
      <div class="upload-note">保证照片清晰，边框完整，方便快速识别</div>
    </div>
  </div>

  <!-- 状态提示 -->
  <div class="status-tip waiting" id="waiting-tip">
    <i class="fas fa-spinner fa-spin"></i> 请上传身份证正反面以识别信息
  </div>

  <div class="status-tip success" id="success-tip" style="display: none;">
    <i class="fas fa-check-circle"></i> 身份证信息识别完成，请核对信息
  </div>

  <!-- 新增：识别信息展示区域 -->
  <div class="info-display" id="id-card-info">
    <div class="info-title">
      <i class="fas fa-id-card"></i>
      身份证识别信息
    </div>
    <div class="info-grid">
      <div class="info-item">
        <div class="info-label">姓名</div>
        <div class="info-value" id="real-name">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">性别</div>
        <div class="info-value" id="gender">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">民族</div>
        <div class="info-value" id="ethnicity">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">出生日期</div>
        <div class="info-value" id="birth-date">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">身份证号</div>
        <div class="info-value" id="id-number">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">住址</div>
        <div class="info-value" id="address">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">签发机关</div>
        <div class="info-value" id="issuing-authority">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">有效期限</div>
        <div class="info-value" id="valid-period">-</div>
      </div>
    </div>
  </div>

  <!-- 隐私提示 -->
  <div class="privacy-tip">
    <i class="fas fa-shield-alt" style="margin-right: 5px;"></i>
    信息不留存，仅用于身份验证，严格保密
  </div>

  <!-- 下一步按钮 -->
  <button class="btn" onclick="submitRealname()" id="submit-btn" disabled>下一步</button>
</div>

<!-- 底部导航栏 -->
<div class="nav">
  <a href="index.html" class="nav-item">
    <i class="fas fa-home"></i>
    <span>首页</span>
  </a>
  <a href="loan.html" class="nav-item">
    <i class="fas fa-money-bill-wave"></i>
    <span>借贷</span>
  </a>
  <a href="message.html" class="nav-item">
    <i class="fas fa-comment-dots"></i>
    <span>消息</span>
  </a>
  <a href="mine.html" class="nav-item">
    <i class="fas fa-user"></i>
    <span>我的</span>
  </a>
</div>

<script>
  // 更新当前时间
  function updateTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    document.querySelector('.welcome-text').textContent = `${hours}:${minutes} 实名认证`;
  }

  updateTime();
  setInterval(updateTime, 60000);

  // 模拟OCR识别数据
  const mockOCRData = {
    portrait: null, // 人像面数据
    emblem: null    // 国徽面数据
  };

  // 文件上传处理函数
  function handleFileUpload(inputElement, side) {
    inputElement.addEventListener('change', function() {
      if (this.files && this.files[0]) {
        const uploadContainer = this.parentElement;
        const uploadIcon = uploadContainer.querySelector('.upload-icon');
        const uploadText = uploadContainer.querySelector('.upload-text');

        // 更新上传状态
        uploadIcon.classList.remove('fa-id-card');
        uploadIcon.classList.add('fa-check-circle');
        uploadIcon.style.color = '#4CAF50';
        uploadText.textContent = '已上传：' + this.files[0].name;
        uploadText.style.color = '#4CAF50';

        // 模拟OCR识别
        setTimeout(() => {
          // 根据上传的面设置模拟数据
          if (side === 'portrait') {
            mockOCRData.portrait = {
              realName: '张三',
              gender: '男',
              ethnicity: '汉',
              birthDate: '1990-01-01',
              idNumber: '110101199001011234',
              address: '北京市朝阳区某某街道某某号'
            };
          } else if (side === 'emblem') {
            mockOCRData.emblem = {
              issuingAuthority: '北京市公安局',
              validPeriod: '2010.01.01-2030.01.01'
            };
          }

          // 检查是否两面都上传完成
          checkUploadCompletion();
        }, 1500);
      }
    });
  }

  // 检查上传完成状态
  function checkUploadCompletion() {
    const portraitUploaded = mockOCRData.portrait !== null;
    const emblemUploaded = mockOCRData.emblem !== null;

    if (portraitUploaded && emblemUploaded) {
      // 两面都上传完成，显示识别信息
      displayOCRResult();
      document.getElementById('waiting-tip').style.display = 'none';
      document.getElementById('success-tip').style.display = 'block';
      document.getElementById('submit-btn').disabled = false;
    } else if (portraitUploaded || emblemUploaded) {
      // 只上传了一面
      document.getElementById('waiting-tip').style.display = 'block';
      document.getElementById('success-tip').style.display = 'none';
    }
  }

  // 显示OCR识别结果
  function displayOCRResult() {
    const infoDisplay = document.getElementById('id-card-info');

    // 合并两面数据
    const mergedData = {
      ...mockOCRData.portrait,
      ...mockOCRData.emblem
    };

    // 更新显示
    document.getElementById('real-name').textContent = mergedData.realName || '-';
    document.getElementById('gender').textContent = mergedData.gender || '-';
    document.getElementById('ethnicity').textContent = mergedData.ethnicity || '-';
    document.getElementById('birth-date').textContent = mergedData.birthDate || '-';
    document.getElementById('id-number').textContent = mergedData.idNumber || '-';
    document.getElementById('address').textContent = mergedData.address || '-';
    document.getElementById('issuing-authority').textContent = mergedData.issuingAuthority || '-';
    document.getElementById('valid-period').textContent = mergedData.validPeriod || '-';

    // 显示信息区域
    infoDisplay.style.display = 'block';
  }

  // 初始化文件上传监听
  handleFileUpload(document.getElementById('portrait-side'), 'portrait');
  handleFileUpload(document.getElementById('national-emblem'), 'emblem');

  // 提交实名认证
  function submitRealname() {
    if (!mockOCRData.portrait || !mockOCRData.emblem) {
      alert('请先完成身份证正反面上传');
      return;
    }

    // 预留接口：提交实名认证信息
    alert('实名认证信息已提交，待审核（预留接口）');
    // 审核后跳转回"我的"页面
    window.location.href = 'face_recognition.html';
  }
</script>
</body>
</html>